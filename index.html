<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Duración de Presidentes - Perú</title>
<script src="https://d3js.org/d3.v7.min.js"></script>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f8f8f8;
}

.chart-container {
  max-width: 900px;
  margin: 40px auto;
}

.name-label {
  font-size: 14px;
  font-weight: bold;
  fill: #333;
}

.duration-label {
  font-size: 1rem;
  font-weight: bold;
}

.date-label {
  font-size: 0.9rem;
}

.type-label {
  font-size: 1rem;
  fill: #fff;
}

.duration-label,
.date-label {
  /*paint-order: stroke;
  stroke: rgba(0, 0, 0, 0.6);
  stroke-width: 2px;*/
}


.chart-container h1{
    font-weight: 800;
    font-size: 1.5rem;
    line-height: 1.3;
    max-width: 82%;
    margin: 0 auto;
}
.chart-container h4{
    font-weight: 400;
    font-size: 1.1rem;
    line-height: 1.3;
    max-width: 82%;
    margin: 10px auto;
}

@media (max-width: 640px) {

  .chart-container h1,
  .chart-container h4{
    max-width: 95%;
  }

  svg {
    width: 100%;
  }
    svg g{
          transform: translate(80px, 10px);
    }

}

</style>
</head>
<body>

    
<div class="chart-container">
    <h1>Duración de mandatos de los últimos presidentes del Perú</h1>
    <h4>Ocho presidentes peruanos en casi 14 años, sin contar con el sucesor de José Jerí, quien fue censurado tras apenas 130 días en el cargo. Así se convirtió en el segundo gobernante con el récord de ejercer menos tiempo,  solo después de Manuel Merino (5 días).</h4>
</div>

<script>

const data = [
  {
    presidente: "Ollanta Humala",
    duracion_dias: 1827,
    duracion_texto: "1 año y 236 días",
    tipo_salida: "Renuncia",
    color: "#5570b4",
    foto_url: "https://lh3.googleusercontent.com/d/1gWwmrAnmeYktK6N75Q4EzFQZtweqTF-a",
    inicio: "28/07/2011",
    fin: "28/07/2016"
  },
  {
    presidente: "Pedro Pablo Kuczynski",
    duracion_dias: 601,
    duracion_texto: "1 año y 236 días",
    tipo_salida: "Renuncia",
    color: "#29a4b6",
    foto_url: "https://lh3.googleusercontent.com/d/1vADpH6wGfnk2yEe3aOPnvE1KQtN8--Ow",
    inicio: "28/07/2016",
    fin: "21/03/2018"
  },
  {
    presidente: "Martín Vizcarra",
    duracion_dias: 962,
    duracion_texto: "2 años, 7 meses y 17 días",
    //tipo_salida: "Vacancia",
    color: "#10957a",
    foto_url: "https://lh3.googleusercontent.com/d/1KpndVQoF6iqVFQgRavLqcumebMGx2Ey0",
    inicio: "23/03/2018",
    fin: "09/11/2020"
  },
  {
    presidente: "Manuel Merino",
    duracion_dias: 5,
    duracion_texto: "5 días",
    //tipo_salida: "Renuncia",
    color: "#103995",
    foto_url: "https://lh3.googleusercontent.com/d/1CrpRuldJT6ccWJAVCvvCienDXn50ZEWf",
    inicio: "10/11/2020",
    fin: "15/11/2020"
  },
  {
    presidente: "Francisco Sagasti",
    duracion_dias: 253,
    duracion_texto: "253 días",
    //tipo_salida: "Transición constitucional",
    color: "#909510",
    foto_url: "https://lh3.googleusercontent.com/d/1N35sg70bvuKbF4_BPboP8FN_GdZWKlEm",
    inicio: "17/11/2020",
    fin: "28/07/2021"
  },
  {
    presidente: "Pedro Castillo",
    duracion_dias: 497,
    duracion_texto: "497 días",
    //tipo_salida: "Intento de autogolpe",
    color: "#ad641d",
    foto_url: "https://lh3.googleusercontent.com/d/1y4ECevAhezhKCqCvl3auOCtADATj4K7B",
    inicio: "28/07/2021",
    fin: "07/12/2022"
  },
  {
    presidente: "Dina Boluarte",
    duracion_dias: 1038,
    duracion_texto: "1038 días",
    //tipo_salida: "Fin de mandato",
    color: "#72ad1d",
    foto_url: "https://lh3.googleusercontent.com/d/1UCbn-25bGjZvndHIzJIRQNxqwib7oNLd",
    inicio: "07/12/2022",
    fin: "10/10/2025"
  },
  {
    presidente: "José Jeri",
    duracion_dias: 130,
    duracion_texto: "130 días",
    //tipo_salida: "Transición constitucional",
    color: "#F39C12",
    foto_url: "https://lh3.googleusercontent.com/d/1k5fdNurrV-5JBNkyNT8pZ2kzt51JoSUf",
    inicio: "10/10/2025",
    fin: "17/02/2026"
  }
];

const margin = {top: 20, right: 40, bottom: 20, left: 150};
const width = 800 - margin.left - margin.right;
const barHeight = 95;
const height = barHeight * data.length;

const svg = d3.select(".chart-container")
  .append("svg")
  .attr("width", width + margin.left + margin.right)
  .attr("height", height + margin.top + margin.bottom)
  .append("g")
  .attr("transform", `translate(${margin.left},${margin.top})`);

const x = d3.scaleLinear()
  .domain([0, d3.max(data, d => d.duracion_dias)])
  .range([0, width]);

// BARRAS (con animación)
svg.selectAll("rect")
  .data(data)
  .enter()
  .append("rect")
  .attr("x", 0)
  .attr("y", (d, i) => i * barHeight + 25)
  .attr("height", 60)
  .attr("width", 0) // empieza en 0
  .attr("fill", d => d.color)
  .attr("rx", 2)
  .transition()
  .duration(900)
  .delay((d, i) => i * 120)
  .ease(d3.easeCubicOut)
  .attr("width", d => x(d.duracion_dias));



// FOTOS
svg.selectAll("image")
  .data(data)
  .enter()
  .append("image")
  .attr("href", d => d.foto_url)
  .attr("x", -80)
  .attr("y", (d, i) => i * barHeight + 20)
  .attr("width", 55)
  .attr("height", 55)
  .attr("clip-path", "circle(27px at 27px 27px)");

// NOMBRE (afuera de la barra)
svg.selectAll(".name-label")
  .data(data)
  .enter()
  .append("text")
  .attr("class", "name-label")
  .attr("x", 0)
  .attr("y", (d, i) => i * barHeight + 20)
  .attr("text-anchor", "start")
  .text(d => d.presidente);

// DURACIÓN (dentro de la barra)
svg.selectAll(".duration-label")
  .data(data)
  .enter()
  .append("text")
  .attr("class", "duration-label")
  .attr("x", 15)
  .attr("y", (d, i) => i * barHeight + 50)
  .attr("fill", d => 
      d.presidente === "Manuel Merino" ? "#000" : "#fff"
  )
  .attr("stroke", d =>
    d.presidente === "Manuel Merino" ? "#fff" : "#606060"
  )
  .attr("stroke-width", 3)
  .attr("paint-order", "stroke")
  .text(d => `${d.duracion_dias.toLocaleString()} días`);
  


// FECHAS (debajo de duración)
svg.selectAll(".date-label")
  .data(data)
  .enter()
  .append("text")
  .attr("class", "date-label")
  .attr("x", 15)
  .attr("y", (d, i) => i * barHeight + 70)
  .attr("fill", d => 
      d.presidente === "Manuel Merino" ? "#000" : "#fff"
  )
  .attr("font-size", "11px")
  .attr("stroke", d =>
    d.presidente === "Manuel Merino" ? "#fff" : "#606060"
  )
  .attr("stroke-width", 3)
  .attr("paint-order", "stroke")
  .text(d => `${d.inicio} hasta ${d.fin}`);


// TIPO DE SALIDA (debajo de duración)
/*svg.selectAll(".type-label")
  .data(data)
  .enter()
  .append("text")
  .attr("class", "type-label")
  .attr("x", 15)
  .attr("y", (d, i) => i * barHeight + 65)
  .text(d => `Salida: ${d.tipo_salida}`);
  */

</script>

</body>
</html>
