<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Duraci칩n de Presidentes - Per칰</title>
<script src="https://d3js.org/d3.v7.min.js"></script>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f8f8f8;
}

.chart-container {
  max-width: 900px;
  margin: 40px auto;
}

.tooltip {
  position: absolute;
  background: white;
  padding: 12px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.2s;
  max-width: 250px;
  font-size: 14px;
}

.bar-label {
  font-size: 14px;
  fill: #333;
}

</style>
</head>
<body>

<div class="chart-container"></div>
<div class="tooltip"></div>

<script>

// 游댳 DATA (luego puedes cargarla desde JSON externo)
const data = [
  {
    presidente: "Pedro Pablo Kuczynski",
    duracion_dias: 601,
    duracion_texto: "1 a침o y 236 d칤as",
    tipo_salida: "Motivo de salida: Renuncia",
    color: "#29a4b6",
    foto_url: "https://lh3.googleusercontent.com/d/1vADpH6wGfnk2yEe3aOPnvE1KQtN8--Ow",
    descripcion: "Renunci칩 tras segundo proceso de vacancia."
  },
  {
    presidente: "Mart칤n Vizcarra",
    duracion_dias: 962,
    duracion_texto: "2 a침os, 7 meses y 17 d칤as",
    tipo_salida: "Vacancia",
    color: "#10957a",
    foto_url: "https://lh3.googleusercontent.com/d/1KpndVQoF6iqVFQgRavLqcumebMGx2Ey0",
    descripcion: "Destituido por incapacidad moral permanente."
  },
  {
    presidente: "Manuel Merino",
    duracion_dias: 5,
    duracion_texto: "5 d칤as",
    tipo_salida: "Renuncia",
    color: "#103995",
    foto_url: "https://lh3.googleusercontent.com/d/1CrpRuldJT6ccWJAVCvvCienDXn50ZEWf",
    descripcion: "Renunci칩 tras protestas nacionales."
  },
  {
    presidente: "Francisco Sagasti",
    duracion_dias: 253,
    duracion_texto: "253 d칤as",
    tipo_salida: "Transici칩n constitucional",
    color: "#909510",
    foto_url: "https://lh3.googleusercontent.com/d/1N35sg70bvuKbF4_BPboP8FN_GdZWKlEm",
    descripcion: "Renunci칩 tras protestas nacionales."
  },
  {
    presidente: "Pedro Castillo",
    duracion_dias: 497,
    duracion_texto: "497 d칤as",
    tipo_salida: "Intento de autogolpe",
    color: "#ad641d",
    foto_url: "https://lh3.googleusercontent.com/d/1y4ECevAhezhKCqCvl3auOCtADATj4K7B",
    descripcion: "Intent칩 disolver el Congreso y fue vacado."
  },
  {
    presidente: "Dina Boluarte",
    duracion_dias: 1038,
    duracion_texto: "1038 d칤as",
    tipo_salida: "Fin de mandato",
    color: "#72ad1d",
    foto_url: "https://lh3.googleusercontent.com/d/1UCbn-25bGjZvndHIzJIRQNxqwib7oNLd",
    descripcion: "Asumi칩 tras vacancia de Castillo."
  },
  {
    presidente: "Jos칠 Jeri",
    duracion_dias: 130,
    duracion_texto: "130 d칤as",
    tipo_salida: "Transici칩n constitucional",
    color: "#F39C12",
    foto_url: "https://lh3.googleusercontent.com/d/1k5fdNurrV-5JBNkyNT8pZ2kzt51JoSUf",
    descripcion: "Gobierno interino."
  }
];

// 游댳 CONFIGURACI칍N
const margin = {top: 20, right: 40, bottom: 20, left: 120};
const width = 800 - margin.left - margin.right;
const barHeight = 70;
const height = barHeight * data.length;

const svg = d3.select(".chart-container")
  .append("svg")
  .attr("width", width + margin.left + margin.right)
  .attr("height", height + margin.top + margin.bottom)
  .append("g")
  .attr("transform", `translate(${margin.left},${margin.top})`);

const x = d3.scaleLinear()
  .domain([0, d3.max(data, d => d.duracion_dias)])
  .range([0, width]);

const tooltip = d3.select(".tooltip");

// 游댳 BARRAS
svg.selectAll("rect")
  .data(data)
  .enter()
  .append("rect")
  .attr("x", 0)
  .attr("y", (d, i) => i * barHeight + 15)
  .attr("height", 30)
  .attr("width", 0)
  .attr("fill", d => d.color)
  .style("cursor", "pointer")
  .transition()
  .duration(800)
  .attr("width", d => x(d.duracion_dias));

// 游댳 FOTOS
svg.selectAll("image")
  .data(data)
  .enter()
  .append("image")
  .attr("xlink:href", d => d.foto_url)
  .attr("x", -100)
  .attr("y", (d, i) => i * barHeight)
  .attr("width", 50)
  .attr("height", 50)
  .attr("clip-path", "circle(25px at 25px 25px)");

// 游댳 NOMBRES
svg.selectAll(".bar-label")
  .data(data)
  .enter()
  .append("text")
  .attr("class", "bar-label")
  .attr("x", 10)
  .attr("y", (d, i) => i * barHeight + 35)
  .text(d => d.presidente);

// 游댳 CLICK TOOLTIP
svg.selectAll("rect")
  .on("click", function(event, d) {
    tooltip
      .style("opacity", 1)
      .html(`
        <strong>${d.presidente}</strong><br>
        ${d.duracion_texto}<br>
        <em>${d.tipo_salida}</em><br><br>
        ${d.descripcion}
      `)
      .style("left", (event.pageX + 10) + "px")
      .style("top", (event.pageY - 20) + "px");
  });

d3.select("body").on("click", function(event) {
  if (!event.target.closest("rect")) {
    tooltip.style("opacity", 0);
  }
});

</script>

</body>
</html>
